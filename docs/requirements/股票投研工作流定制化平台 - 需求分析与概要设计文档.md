<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# 股票投研工作流定制化平台 - 需求分析与概要设计文档

**项目代号**: Investment Research Workflow Platform
**文档版本**: v1.0
**最后更新**: 2026-01-19
**文档状态**: 概要设计阶段

***

## 一、项目背景与目标

### 1.1 项目定位

为**私募投资者**打造的AI赋能投研效率工具，核心目标是通过LangGraph编排的智能工作流，**快速排除95%的市场噪音，聚焦最有价值的5%投资标的**。

**不是**：

- ❌ 替代iFinD/Wind的全能数据终端
- ❌ 面向散户的投资教育工具
- ❌ 自动化交易系统

**而是**：

- ✅ 私募投资者的效率加速器
- ✅ 定制化投研工作流编排平台
- ✅ AI驱动的信息降噪与验证系统


### 1.2 目标用户画像

**核心用户：私募大佬级投资者**

**特征**：

- 已有专业工具（iFinD、Wind等），但仍感到"不够快"
- 投资风格：科技股为主，持仓周期中短期（非巴菲特式长期持有）
- 投研特点：广度优先（今天看新能源，明天看医疗器械），需要快速建立80分认知
- 痛点：需要在**3小时内快速了解陌生行业**并筛选出核心标的
- 理念：推崇杰西·利弗莫尔（关注市场情绪、趋势判断、快速进出）

**典型工作流**：

```
1. "先筛ROE>15%且连续3年增长的"
2. 看结果 → "不对，制造业的ROE标准应该降到12%"
3. 再筛 → "这些公司里，剔除掉高负债的"
4. 再看 → "留下的这20只，哪些最近有产业政策利好？"
5. 挑出3-5只 → "这几只的产业链上下游情况如何？"
6. 深挖某一只 → "这家公司说的'AI+医疗'是真的还是蹭概念？"
```


***

## 二、核心需求分析

### 2.1 核心诉求（用户原话）

> "我不需要你替我研究透，我需要你**快速帮我排除95%的噪音**，让我把精力聚焦在最有价值的5%标的上"

### 2.2 竞品分析与差异化

| 竞品 | 痛点 | 我们的差异化 |
| :-- | :-- | :-- |
| **iFinD/Wind** | -  价格高（年费数万）<br>-  功能复杂，操作慢<br>-  定制化差，固定模块 | -  自然语言驱动的筛选<br>-  LangGraph工作流编排<br>-  面向个人的定价策略 |
| **Alice智能助手**<br>(Wind官方AI) | -  单轮问答，无流程记忆<br>-  无法编排多步骤任务<br>-  只是查询工具，非工作流 | -  **多Agent协作工作流**<br>-  状态持久化<br>-  30分钟完成"快速行业认知" |
| **通用AI**<br>(ChatGPT等) | -  无A股专业性<br>-  无法接入专业数据源<br>-  缺少财务逻辑理解 | -  A股特色场景优化<br>-  直接对接iFinD数据<br>-  概念可信度验证引擎 |

### 2.3 功能需求优先级

#### P0 - 核心功能（MVP必备）

**FR-1: 层层迭代筛选引擎**

- 自然语言描述 → 结构化筛选条件（DeepSeek LLM）
- 支持复杂组合逻辑（AND/OR/NOT嵌套）
- 实时预览结果数量（无需执行完整查询）
- 保存筛选模板，支持复用和微调

**FR-2: AI驱动的快速行业认知**

- 输入："快速了解合成生物学赛道"
- 输出（30分钟内）：
    - 行业一页纸总结（产业链、技术路线、市场规模）
    - 5-10只核心标的 + 可信度评分
    - 风险提示与催化剂
- LangGraph实现5-Agent协作工作流

**FR-3: 概念可信度验证**

- 针对A股"小作文"炒作的识别能力
- 分析维度：
    - 主营业务匹配度
    - 实质订单/专利证据
    - 历史蹭热点记录
    - 产业链逻辑合理性
- 输出：可信度评分（0-100）+ 风险标签


#### P1 - 增强功能（第二阶段）

**FR-4: 产业链深度分析**

- 上下游公司关系图谱
- 供应链集中度风险评估
- 客户结构分析

**FR-5: 筛选结果对比**

- 今日筛选 vs 上周筛选的变化
- 历史筛选条件的有效性复盘

**FR-6: 可视化查询构建器**

- 图形化拖拽筛选条件
- 辅助自然语言输入


### 2.4 非功能需求

**NFR-1: 性能**

- 筛选响应时间 < 3秒（5000只股票）
- AI分析任务30分钟内完成
- 支持实时进度推送（WebSocket）

**NFR-2: 数据源解耦**

- **依赖倒置原则**：上层不依赖具体数据源实现
- 支持iFinD/AkShare无缝切换（环境变量配置）
- 为未来接入Wind预留接口

**NFR-3: 可扩展性**

- 新增筛选指标无需改动核心代码
- LangGraph工作流可动态调整
- 前端可定制工作流顺序

**NFR-4: 学习目标**

- 深度实践DDD架构（限界上下文+分层）
- 掌握LangGraph多Agent编排
- 学习Vibe Coding最佳实践

***

## 三、技术栈选择

### 3.1 技术栈总览

| 层级 | 技术选择 | 选择理由 | 学习优先级 |
| :-- | :-- | :-- | :-- |
| **前端** | React.js + Ant Design | 学习React基础，中文友好的组件库 | ⭐⭐⭐ |
| **后端框架** | Flask + RESTful API | 熟悉的技术栈，快速开发 | ⭐（已掌握） |
| **智能编排** | **LangGraph + DeepSeek** | **核心差异化**，多Agent工作流 | ⭐⭐⭐⭐⭐ |
| **关系数据库** | PostgreSQL | 学习目标，时序数据扩展（TimescaleDB） | ⭐⭐⭐⭐ |
| **文档数据库** | MongoDB | 存储非结构化数据（新闻、研报） | ⭐⭐ |
| **缓存/事件** | Redis | 学习目标，缓存+进度推送 | ⭐⭐⭐⭐ |
| **异步任务** | Celery | 数据同步、长时任务 | ⭐⭐ |
| **数据源** | iFinD API + AkShare | 主用iFinD（趁账号有效），备用AkShare | ⭐⭐⭐ |
| **部署** | Docker Compose | 本地部署，不需要复杂编排 | ⭐⭐ |

### 3.2 LLM选择：DeepSeek

**理由**：

- 国内访问稳定
- 价格便宜（相比OpenAI）
- 中文理解能力强（适合A股场景）
- 使用量不大，成本可控

**用途**：

1. 自然语言 → 筛选条件的翻译
2. 行业背景总结生成
3. 概念可信度逻辑推理
4. 产业链合理性分析

### 3.3 数据源架构（依赖倒置）

**设计原则**：

- 领域层定义 `IMarketDataRepository` 接口
- 基础设施层实现多个Adapter（iFinD/AkShare/Wind）
- 通过环境变量切换数据源

```python
# 接口定义（Shared Kernel）
class IMarketDataRepository(ABC):
    @abstractmethod
    def query_stocks(self, filters) -> List[Stock]:
        pass

# 实现1：iFinD（趁账号有效）
class IFindAdapter(IMarketDataRepository):
    def query_stocks(self, filters):
        # 调用iFinD API
        pass

# 实现2：AkShare（备用）
class AkShareAdapter(IMarketDataRepository):
    def query_stocks(self, filters):
        # 调用akshare
        pass

# 配置切换
DATA_SOURCE = os.getenv('DATA_SOURCE', 'ifind')  # 'ifind' or 'akshare'
```


***

## 四、DDD架构设计

### 4.1 限界上下文划分（横向）

#### 4.1.1 识别方法：语言测试法

**核心问题**：不同业务能力是否使用不同的"通用语言"（Ubiquitous Language）？


| 业务场景 | 通用语言 | 是否独立上下文 |
| :-- | :-- | :-- |
| 筛选股票 | "筛选条件"、"候选池"、"评分权重" | ✅ 是 |
| AI分析 | "行业认知"、"可信度"、"概念验证" | ✅ 是 |
| 数据获取 | "数据源"、"API调用" | ❌ 否（技术细节） |

#### 4.1.2 最终划分：2个核心上下文

```
┌────────────────────────────────────────────────────┐
│            Shared Kernel (共享内核)                 │
│  - StockCode (值对象：A股代码规范)                   │
│  - Money (值对象)                                   │
│  - IMarketDataRepository (数据访问接口)             │
└────────────┬───────────────────────────────────────┘
             │ 共享
    ┌────────┴─────────┐
    │                  │
┌───▼──────────────┐  ┌▼─────────────────────────┐
│ Stock Screening  │  │ Investment Intelligence  │
│    Context       │  │       Context            │
│ (筛选上下文)      │  │ (智能分析上下文)           │
│                  │  │                          │
│ 职责：           │  │ 职责：                    │
│ • 执行筛选       │  │ • 快速行业认知             │
│ • 评分排序       │  │ • 概念可信度验证           │
│ • 保存模板       │  │ • 产业链分析               │
│                  │  │ • LangGraph工作流         │
│ 技术特点：       │  │ 技术特点：                 │
│ • SQL查询        │  │ • LLM API调用             │
│ • 数学计算       │  │ • 爬虫                    │
│ • 缓存优化       │  │ • 自然语言处理             │
└──────────────────┘  └──────────────────────────┘
```

**关键设计决策**：

- ✅ 两个上下文**无运行时依赖**（不互相调用）
- ✅ 通过**Shared Kernel共享接口和值对象**
- ✅ 跨上下文流程由**工作流API**在应用层编排


### 4.2 纵向分层架构（每个上下文内部）

#### 4.2.1 四层架构

```
每个上下文内部：

┌─────────────────────────────────────┐
│   Interface Layer (接口层)           │
│   - Flask Controllers                │
│   - RESTful API                      │
│   - DTO (数据传输对象)                 │
│   职责：HTTP请求处理，无业务逻辑        │
└──────────────┬──────────────────────┘
               │
┌──────────────▼──────────────────────┐
│   Application Layer (应用层)         │
│   - Service类                        │
│   - 编排领域对象                      │
│   - 事务管理                          │
│   - 可被工作流API调用                 │
└──────────────┬──────────────────────┘
               │
┌──────────────▼──────────────────────┐
│   Domain Layer (领域层)              │
│   - 聚合根、实体、值对象               │
│   - 领域服务                          │
│   - Repository接口（不是实现）         │
│   - 纯业务逻辑，无技术依赖             │
└──────────────┬──────────────────────┘
               │
┌──────────────▼──────────────────────┐
│   Infrastructure Layer (基础设施层)   │
│   - Repository实现                   │
│   - 数据库访问（ORM）                 │
│   - 外部API适配器（iFinD/AkShare）    │
│   - LangGraph工作流（Intelligence）   │
│   - Redis缓存                        │
└─────────────────────────────────────┘
```


#### 4.2.2 依赖方向（依赖倒置原则）

```
Interface Layer
    ↓ 依赖
Application Layer
    ↓ 依赖
Domain Layer (核心，不依赖任何层)
    ↑ 实现接口
Infrastructure Layer
```

**关键**：

- Domain层定义接口（如 `IScreeningRepository`）
- Infrastructure层实现接口
- 符合依赖倒置原则（DIP）


### 4.3 跨上下文协作

#### 4.3.1 工作流API的职责

**位置**：`api/workflows/` （不属于任何上下文）

**职责**：

- 编排多个上下文的Application Service
- **进程内调用**（不走HTTP）
- 无业务逻辑，只做流程组合

**示例**：

```python
# api/workflows/quick_research_controller.py
from contexts.screening.application.services.screening_service import ScreeningService
from contexts.intelligence.application.services.intelligence_service import IntelligenceService

@workflow_bp.route('/quick-research', methods=['POST'])
def quick_industry_research():
    user_input = request.json['query']
    
    # 进程内调用Application Service（不是HTTP）
    intelligence_service = IntelligenceService()
    screening_service = ScreeningService()
    
    # 编排流程
    intent = intelligence_service.parse_intent(user_input)
    candidates = screening_service.execute(intent['filters'])
    analysis = intelligence_service.analyze(candidates)
    
    return jsonify({'candidates': candidates, 'analysis': analysis})
```


#### 4.3.2 前端调用方式

**方式1：单一上下文操作 → 直接调用上下文API**

```javascript
// 用户迭代调整筛选条件
await fetch('/api/screening/execute', {
  body: { filters: {...} }
});
```

**方式2：复杂流程 → 调用工作流API**

```javascript
// 一键触发"快速行业研究"
await fetch('/api/workflows/quick-research', {
  body: { query: "快速了解合成生物学" }
});
```

**方式3：前端自己编排（简单流程）**

```javascript
// 前端连续调用两个上下文
const intent = await fetch('/api/intelligence/parse-intent');
const result = await fetch('/api/screening/execute', { body: intent });
```


### 4.4 项目目录结构

```
src/
│
├── shared_kernel/                       # 共享内核
│   ├── value_objects/
│   │   ├── stock_code.py               # A股代码值对象
│   │   └── money.py
│   └── interfaces/
│       └── market_data_repository.py   # 数据访问接口
│
├── contexts/                            # 限界上下文
│   │
│   ├── screening/                       # 筛选上下文
│   │   ├── interface/                   # 接口层
│   │   │   ├── controllers/
│   │   │   │   └── screening_controller.py
│   │   │   └── dto/
│   │   │       ├── screening_request.py
│   │   │       └── screening_response.py
│   │   │
│   │   ├── application/                 # 应用层
│   │   │   └── services/
│   │   │       └── screening_service.py
│   │   │
│   │   ├── domain/                      # 领域层
│   │   │   ├── models/
│   │   │   │   ├── screening_strategy.py  # 聚合根
│   │   │   │   ├── filter_group.py
│   │   │   │   └── stock_ranking.py
│   │   │   ├── repositories/            # 接口定义
│   │   │   │   └── screening_repository.py
│   │   │   └── services/                # 领域服务
│   │   │       └── scoring_engine.py
│   │   │
│   │   └── infrastructure/              # 基础设施层
│   │       ├── persistence/
│   │       │   ├── models/              # ORM模型
│   │       │   │   └── screening_strategy_po.py
│   │       │   └── repositories/        # 仓储实现
│   │       │       └── screening_repository_impl.py
│   │       ├── data_adapters/
│   │       │   ├── ifind_screening_adapter.py
│   │       │   └── akshare_screening_adapter.py
│   │       └── ai/
│   │           └── nl_parser.py         # 自然语言解析
│   │
│   └── intelligence/                    # 智能分析上下文
│       ├── interface/
│       │   ├── controllers/
│       │   │   └── intelligence_controller.py
│       │   └── dto/
│       │
│       ├── application/
│       │   └── services/
│       │       └── intelligence_service.py
│       │
│       ├── domain/
│       │   ├── models/
│       │   │   ├── investigation_task.py    # 聚合根
│       │   │   ├── credibility_report.py
│       │   │   └── industry_insight.py
│       │   ├── repositories/
│       │   └── services/
│       │
│       └── infrastructure/
│           ├── ai/
│           │   ├── langgraph_workflows/
│           │   │   ├── quick_overview_workflow.py
│           │   │   └── credibility_analysis_workflow.py
│           │   └── deepseek_client.py
│           ├── data_adapters/
│           │   └── ifind_intelligence_adapter.py
│           └── scrapers/
│               └── news_scraper.py
│
├── api/                                 # 跨上下文工作流
│   └── workflows/
│       └── quick_research_controller.py
│
├── frontend/                            # React前端
│   ├── src/
│   │   ├── features/
│   │   │   ├── screening/
│   │   │   └── intelligence/
│   │   └── services/
│   │       └── api.js
│   └── package.json
│
├── tests/                               # 测试
│   ├── unit/
│   └── integration/
│
├── docker-compose.yml                   # Docker编排
├── app.py                               # Flask入口
├── config.py                            # 配置管理
├── requirements.txt
└── README.md
```


***

## 五、核心业务流程设计

### 5.1 快速行业研究工作流（LangGraph）

**输入**："快速了解合成生物学赛道"

**LangGraph多Agent协作**：

```
┌──────────────────────────────────────────────┐
│ Agent 1: 行业背景速览                         │
│ - DeepSeek生成行业综述（200字）                │
│ - 识别产业链结构（上/中/下游）                 │
│ - 关键技术路线                                │
│ 输出: 行业一页纸总结                          │
└────────────┬─────────────────────────────────┘
             ↓
┌──────────────────────────────────────────────┐
│ Agent 2: 市场热度分析（利弗莫尔视角）          │
│ - 爬取近7天新闻量（东方财富）                  │
│ - 概念股平均涨幅                              │
│ - 资金流入情况                                │
│ 输出: 热度评分 + 趋势判断                     │
└────────────┬─────────────────────────────────┘
             ↓
┌──────────────────────────────────────────────┐
│ Agent 3: 标的快速筛选                         │
│ - 从iFinD获取有"合成生物"标签的公司            │
│ - 财务初筛（ROE、增速、市值）                  │
│ 输出: 30只候选股票                            │
└────────────┬─────────────────────────────────┘
             ↓
┌──────────────────────────────────────────────┐
│ Agent 4: 真实性批量验证（核心差异化）          │
│ - 并行分析30只公司：                          │
│   ├─ 主营业务匹配度（DeepSeek推理）            │
│   ├─ 是否有实质订单/专利                      │
│   └─ 历史蹭热点记录                           │
│ 输出:                                        │
│   ✅ 高可信度（5只）                          │
│   ⚠️  中可信度（10只）                        │
│   ❌ 低可信度（15只，标记"纯蹭热点"）          │
└────────────┬─────────────────────────────────┘
             ↓
┌──────────────────────────────────────────────┐
│ Agent 5: 竞争格局速览                         │
│ - 对5只高可信度公司做对比                      │
│ - 技术路线、客户重叠、估值差异                 │
│ 输出: 对比表 + 投资建议                       │
└──────────────────────────────────────────────┘
             ↓
        最终交付（30分钟）
```

**状态持久化**：

- LangGraph状态存储在Redis
- 支持断点续传（Agent执行失败可重试）
- 前端实时显示进度（WebSocket推送）


### 5.2 概念可信度验证算法

**不依赖历史数据积累，用LLM推理**

```python
def verify_concept_credibility(stock, concept):
    # 1. 收集证据
    evidence = {
        'announcements': get_company_announcements(stock),
        'main_business': get_main_business_from_financial_report(stock),
        'rd_investment': get_rd_investment(stock),
        'news': scrape_recent_news(stock, concept, days=30)
    }
    
    # 2. DeepSeek推理
    prompt = f"""
    公司：{stock.name}
    声称概念：{concept}
    主营业务：{evidence['main_business']}
    
    证据：
    - 公司公告：{evidence['announcements']}
    - 近3年研发投入：{evidence['rd_investment']}
    - 新闻：{evidence['news']}
    
    请作为私募投资分析师，分析该公司是否真正具备该概念的实力：
    1. 主营业务匹配度（0-100）
    2. 技术储备评估（有专利/订单/合作伙伴？）
    3. 历史炒作记录（是否多次蹭不同热点？）
    4. 综合可信度（0-100）
    5. 风险提示（一句话）
    
    以JSON格式返回。
    """
    
    result = deepseek_client.complete(prompt)
    return parse_credibility_score(result)
```

**优势**：

- 无需历史数据库（现在就能用）
- 灵活应对新概念（"合成生物学"去年还没有）
- DeepSeek能识别"钢铁公司说要做AI"的不合理性

***

## 六、待讨论事项

### 讨论点1：技术组件的具体实现 🔧

#### 1.1 Redis的引入与应用

**需讨论**：

- [ ] Redis的5种数据结构在项目中的应用场景
    - String：筛选结果缓存
    - Hash：股票快照数据
    - Sorted Set：实时排行榜
    - Pub/Sub：进度推送
    - List：任务队列（配合Celery）
- [ ] Key命名规范设计（如 `screening:result:{条件MD5}`）
- [ ] 缓存过期策略（TTL设置）
- [ ] LangGraph状态持久化到Redis的具体方案
- [ ] Redis持久化配置（RDB vs AOF）


#### 1.2 Docker的部署架构

**需讨论**：

- [ ] docker-compose.yml的服务拆分

```yaml
services:
  app:        # Flask + LangGraph合一个容器？还是分离？
  postgres:   # PostgreSQL配置
  redis:      # Redis配置
  mongodb:    # 是否必需？
  celery:     # Worker数量
```

- [ ] 本地部署的简化策略（避免过度复杂）
- [ ] 环境变量管理（.env文件设计）
- [ ] 数据卷挂载策略（数据持久化）


#### 1.3 数据库角色划分

**需讨论**：

- [ ] **PostgreSQL的职责**
    - 股票基础数据（stocks表）
    - 财务指标（financial_indicators表）
    - 筛选模板（screening_strategies表）
    - 用户投研历史（investigation_tasks表）
    - TimescaleDB扩展的必要性（是否需要高频数据？）
- [ ] **MongoDB的职责**
    - 新闻原文（news_cache）
    - 公司公告PDF（announcements）
    - LLM生成的分析报告（analysis_reports）
    - 是否可以省略？（成本vs收益）
- [ ] **数据同步策略**
    - 每日从iFinD全量同步 vs 增量同步
    - Celery定时任务的时间设置（23:00？）
    - 数据版本管理（如何处理iFinD数据更正？）

***

### 讨论点2：可扩展性与可维护性设计 🏗️

#### 2.1 新增筛选指标的扩展性

**需讨论**：

- [ ] 如何在不改动Domain层代码的情况下新增指标？
- [ ] 配置驱动的指标定义（YAML/JSON配置文件？）
- [ ] 动态加载指标计算逻辑的机制


#### 2.2 数据源切换的验证

**需讨论**：

- [ ] iFinD → AkShare切换的测试策略
- [ ] 数据格式差异的处理（Mapper层设计）
- [ ] 切换后的数据一致性验证


#### 2.3 LangGraph工作流的可配置性

**需讨论**：

- [ ] 用户是否能自定义Agent顺序？
- [ ] 工作流模板的存储（数据库 vs 代码）
- [ ] 工作流版本管理（如何升级已保存的工作流？）


#### 2.4 测试策略

**需讨论**：

- [ ] Domain层的单元测试（Mock Repository）
- [ ] LangGraph工作流的测试（如何Mock LLM？）
- [ ] 集成测试的边界（是否需要真实iFinD环境？）

***

### 讨论点3：Vibe Coding最佳实践 🤖

#### 3.1 项目搭建阶段的Vibe Coding

**需讨论**：

- [ ] 使用Cursor的`.cursorrules`文件预定义规范

```
示例规范：
- Domain层不得导入SQLAlchemy
- Repository接口定义在domain/repositories
- Redis键命名：{上下文}:{实体}:{ID}
```

- [ ] 脚手架生成策略
    - 用AI生成完整的目录结构
    - 生成模板代码（Controller、Service、Repository框架）
    - 人工review后再填充业务逻辑


#### 3.2 分层开发的Vibe Coding策略

| 层级 | Vibe Coding强度 | 人工介入点 |
| :-- | :-- | :-- |
| **Domain层** | ⭐⭐（低） | 聚合根设计、业务规则（AI易偏离） |
| **Application层** | ⭐⭐⭐⭐（高） | 服务编排、DTO转换（重复性工作） |
| **Infrastructure层** | ⭐⭐⭐⭐⭐（极高） | Repository实现、Mapper（模式固定） |
| **Interface层** | ⭐⭐⭐⭐（高） | RESTful路由、参数校验（标准化） |

**需讨论**：

- [ ] Domain层的业务逻辑如何避免AI"过度创新"？
- [ ] 如何让AI生成符合项目规范的代码？
- [ ] 批量生成多个实体的Repository时的Prompt设计


#### 3.3 迭代开发的Vibe Coding工作流

**需讨论**：

- [ ] 第一版手动实现 + 作为示例 → 第二版AI批量生成
- [ ] 增量式Prompt策略（逐步添加约束）
- [ ] 代码Review的Checklist（人工vs AI辅助）

***

### 讨论点4：软件过程模型 📋

#### 4.1 适合个人项目的过程模型

**需讨论选择**：


| 模型 | 适用性 | 优劣 |
| :-- | :-- | :-- |
| **迭代模型** | ✅ 推荐 | 每2-3周一个迭代，快速验证 |
| **敏捷（精简版）** | ✅ 可选 | User Story驱动，但需要精简仪式 |
| **瀑布模型** | ❌ 不推荐 | 个人项目需求会变，不适合 |

**推荐：3个月4迭代计划**

- **迭代1（3周）**：数据层解耦 + 基础筛选
- **迭代2（4周）**：LangGraph快速认知工作流
- **迭代3（3周）**：概念可信度验证
- **迭代4（2周）**：前端打磨 + 用户测试


#### 4.2 Vibe Coding与迭代开发的融合

**需讨论**：

- [ ] **迭代计划阶段**
    - 用AI辅助生成User Story
    - 用AI评估工作量（输入功能描述 → 输出代码行数估算）
- [ ] **迭代开发阶段**
    - 每个User Story的Vibe Coding策略
    - 代码生成 → 人工Review → 测试的节奏
- [ ] **迭代回顾阶段**
    - 复盘哪些地方Vibe Coding效果好/差
    - 总结Prompt模板库（复用到下个迭代）


#### 4.3 与"大佬"的协作节奏

**需讨论**：

- [ ] **每周一次演示**
    - 展示新功能，收集反馈
    - 观察他使用iFinD的过程（需求挖掘）
- [ ] **双周一次深度访谈**
    - 讨论工作流设计
    - 验证AI分析结果的准确性
- [ ] **迭代交付物**
    - 可运行的Demo（Docker一键启动）
    - 功能说明文档（用AI生成初稿）

***

## 七、项目里程碑与交付物

### 7.1 MVP阶段（前6周）

**目标**：验证核心价值（自然语言筛选 + 概念验证）

**交付物**：

- [ ] 可运行的Docker环境
- [ ] 自然语言 → 筛选条件的转换
- [ ] 基础的概念可信度分析（1-2个Agent）
- [ ] 简单的React前端（输入框+结果表格）

**验收标准**：

- 大佬能用自然语言描述条件，3秒内得到结果
- 对某只股票的概念验证准确率 > 70%（人工评估）


### 7.2 完整版（3个月）

**目标**：替代iFinD成为大佬的主力工具

**交付物**：

- [ ] 完整的5-Agent快速认知工作流
- [ ] 批量可信度验证（30只股票并行分析）
- [ ] 筛选模板保存与复用
- [ ] 前端体验优化（实时进度、可视化）

**验收标准**：

- "快速了解XX行业"从3小时降至30分钟
- 大佬主动选择使用本系统（而非iFinD）

***

## 八、风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
| :-- | :-- | :-- | :-- |
| iFinD账号到期 | 高 | 中 | 已设计数据源解耦，可切换AkShare |
| LLM成本超预算 | 中 | 低 | DeepSeek便宜，设置月度预算告警 |
| 大佬需求频繁变更 | 高 | 中 | 迭代开发，快速响应 |
| DDD过度设计影响进度 | 中 | 中 | MVP阶段允许简化，后期重构 |
| LangGraph学习曲线陡峭 | 中 | 高 | 先实现简单工作流，逐步复杂化 |


***

## 九、下一步行动

### 优先级排序

**P0 - 立即行动**：

1. [ ] 与大佬深度访谈（2小时），观察iFinD使用过程
2. [ ] 搭建Docker开发环境
3. [ ] 实现数据源适配器（iFinD + AkShare）

**P1 - 第一周内**：
4. [ ] 设计Screening Context的领域模型
5. [ ] 实现自然语言→筛选条件的转换（DeepSeek）
6. [ ] 开发简单的React前端框架

**P2 - 第一个月内**：
7. [ ] LangGraph快速认知工作流（最小化版本）
8. [ ] 概念可信度验证（单个股票）

***

**文档状态**：✅ 已完成概要设计，等待技术细节讨论
**下次讨论重点**：从"讨论点1.1 Redis应用"或"讨论点3 Vibe Coding实践"开始

